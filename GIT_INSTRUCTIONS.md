# Git 使用方法 - プロジェクト管理ガイド

## ⚡ スーパー基本版（2分）

### サーバーから変更を取得する
```bash
git pull --no-ff
```
ターミナルを開いて（⌘ + `）この命令を入力してください。

### 変更を保存する（コミット）
1. **⌘ + Shift + G** を押す（Source Control が開く）
2. ファイルの横の **+** を押す（Staged Changes に移動）
3. 上のメッセージ欄に入力（例：「メニューを更新」）
4. **⌘ + Enter** か ✓ ボタンを押す

### サーバーに送信する
ターミナルで：
```bash
git push
```

---

## 📚 詳しい説明

### 1️⃣ 始める

**ステップ1：VS Code でプロジェクトを開く**
- VS Code を開く
- File → Open Folder → `tomochan-house` フォルダを選択

**ステップ2：ブランチを確認**
- 画面の左下に「master」と表示されているはず
- 違う場合はクリックして「master」を選択

**ステップ3：最新データを取得（重要！毎回必ずやる）**
プロジェクトを開いたら、すぐに最新の更新を取得してください。これにより、競合を防ぐことができます。

ターミナルを開いて（⌘ + `）以下を実行：
```bash
git fetch
git pull --no-ff
```

または UI 経由で：
1. Source Control を開く（⌘ + Shift + G）
2. 三点メニュー **⋯** → **Fetch**
3. 三点メニュー **⋯** → **Pull**

このステップを飛ばすと、古いバージョンで作業してしまい、あとで競合が発生します！

---

### 2️⃣ サーバーから更新を取得（git fetch / pull）

#### 方法1：ターミナル経由（推奨）
1. ターミナルを開く：**⌘ + `**
2. 以下のどちらかを入力：
   ```bash
   git fetch              # 更新をダウンロードする（適用しない）
   git pull --no-ff       # ダウンロードして適用する
   ```
3. 「Already up to date」が表示されたら、最新版です

#### 方法2：UI ボタン経由
1. Source Control を開く：**⌘ + Shift + G**
2. 三点メニュー **⋯** → **Pull** または **Fetch** を選択

#### Merge の確認画面が出た場合
- **Resolve** をクリック
- 通常は「their version」（サーバー版）を選ぶか「your version」（あなた版）を選びます
- 迷ったらアンドレイに聞いてください

---

### 3️⃣ コミットする（変更を保存）

#### 方法1：UI 経由（初心者向け）

1. **Source Control を開く** （左サイドバー、⌘ + Shift + G）

2. **2つのセクションが見えます：**
   - **Changes** - 未保存ファイル（赤いアイコン）
   - **Staged Changes** - コミット準備完了（緑のアイコン）

3. **ファイルを選択:**
   - Changes のファイルにマウスを合わせる
   - **+** ボタンを押す（Staged Changes に移動）
   - または Changes の **+** を押す（全ファイル追加）

4. **メッセージを入力:**
   - 上部の「Message」欄に入力
   - 例：「メニューにカクテルを追加」
   - 例：「カレンダーの色を修正」

5. **コミットを作成:**
   - **⌘ + Enter** を押す
   - または ✓ ボタンをクリック

#### 方法2：ターミナル経由

```bash
git add .                        # すべてのファイルを追加
git commit -m "メッセージ"       # コミットを作成
```

**例：**
```bash
git commit -m "カレンダーに specialDates を追加"
```

---

### 4️⃣ サーバーに送信（git push）

#### 方法1：ターミナル経由（推奨）
```bash
git push
```

#### 方法2：UI 経由
1. Source Control → **⋯** → **Push**

#### 結果の確認
- ✅ 「Everything up to date」 - 成功
- ❌ 「Permission denied」 - SSH 鍵の問題（アンドレイに相談）
- ❌ 「Rejected」 - サーバーに新しい変更がある（先に `git pull --no-ff` する）

---

### 5️⃣ 典型的な1日の流れ

```
朝：git pull --no-ff          （更新を取得）
  ↓
作業：ファイルを編集
  ↓
コミット：⌘ + Shift + G → + → メッセージ → ⌘ + Enter
  ↓
さらに編集？ → 作業とコミットを繰り返す
  ↓
最後：git push                （すべて送信）
```

---

### 6️⃣ VS Code の便利なショートカット（macOS）

| 操作 | ショートカット |
|------|---------------|
| Source Control を開く | ⌘ + Shift + G |
| ターミナルを開く | ⌘ + ` |
| コミットを作成 | ⌘ + Enter |
| ファイルの変更を元に戻す | ⌘ + Z |

---

### 7️⃣ 問題が発生した場合

**確認コマンド：**
```bash
git status
```
ターミナルで入力すると、現在の状態がすべて表示されます。

**よくあるエラー：**
- 「Rejected」が出た → 先に `git pull --no-ff` を実行
- ファイルが競合している → アンドレイに相談（彼が解決します）
- 誤ってファイルを削除 → ⌘ + Z または `git restore ファイル名`

---

### 💡 アドバイス

✅ **頻繁にコミットする** - 何か完成したらすぐにコミット
✅ **わかりやすいメッセージを書く** - 「メニュー更新」ではなく詳しく
✅ **始める前に pull する** - 常に最新版で作業を開始
✅ **終わる前に push する** - その日の終わりにすべて送信
❌ **pull なしで push しない** - 競合が発生します

---

## 🆘 クイックヘルプ

迷ったときは、ターミナルで以下を実行してください：
```bash
git status
```

以下の情報が表示されます：
- 現在のブランチ
- 変更されたファイル
- コミット準備完了ファイル

これで次に何をすべきかわかります！

---

## ⚠️ 重要な注意事項

### プロジェクトを開くたびにやること（競合を防ぐため）

毎回プロジェクトを開いたら、**必ず以下の順序で実行してください**：

1. **プロジェクトを開く** → File → Open Folder
2. **すぐに Fetch + Pull をする**
   ```bash
   git fetch
   git pull --no-ff
   ```
3. **「Already up to date」と表示されれば OK**
4. **その後で作業を開始する**

### なぜこれが重要か？

- アンドレイが何か変更してサーバーにアップロードした場合、`git fetch + pull` をしないと古いバージョンで作業してしまう
- 古いバージョンで変更を加えてから `git push` しようとすると、**競合が発生してしまう**
- 毎回最新データを取得することで、競合を 99% 防ぐことができます

### チェックリスト

開始時：
- ☐ プロジェクトを開いた
- ☐ `git fetch` を実行した
- ☐ `git pull --no-ff` を実行した
- ☐ 「Already up to date」を確認した

終了時：
- ☐ すべての変更をコミットした
- ☐ `git push` を実行した
- ☐ プッシュが成功したことを確認した

---

## 📞 連絡先

質問やトラブルが発生したら、アンドレイに連絡してください！